(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}})();const tokensSearch=document.querySelector("#tokens-input-search"),tokensBox$3=document.querySelector("#tokens-box");tokensSearch.addEventListener("input",()=>{for(let o of tokensBox$3.children)o.getAttribute("name").includes(tokensSearch.value.toUpperCase())?o.style.display="block":o.style.display="none"});const tokensBox$2=document.querySelector("#tokens-box"),apiKey$1="548543d60cae568eca567de3ef6e1c3a8481c14af37ce4aeb38a22a4f80868e2;";async function updateCoin(){try{if(!tokensBox$2.childNodes.length)return 1;let o="";for(let e=0;e<tokensBox$2.childNodes.length;e++)tokensBox$2.childNodes[e+1]?o=o+`${tokensBox$2.childNodes[e].getAttribute("name")},`:o=o+`${tokensBox$2.childNodes[e].getAttribute("name")}`;(await fetch(`https://min-api.cryptocompare.com/data/pricemulti?fsyms=${o}&tsyms=USD&api_key=${apiKey$1}`)).json().then(e=>{if(e.USD)for(let s=0;s<tokensBox$2.childNodes.length;s++)try{let n=tokensBox$2.childNodes[s].getAttribute("name");document.querySelector(`[name=${tokensBox$2.childNodes[s].getAttribute("name")}] #price`).innerHTML=`${e[n].USD}`,tokensBox$2.childNodes[s].setAttribute("value",e[n].USD)}catch{}})}catch{}}setInterval(updateCoin,1e3);const sortBtn=document.querySelector("#sort-btn"),tokensBox$1=document.querySelector("#tokens-box");let coinSortIncrease=(a,b)=>eval(a.getAttribute("value"))>eval(b.getAttribute("value"))?1:eval(a.getAttribute("value"))<eval(b.getAttribute("value"))?-1:0,coinSortDecrease=(a,b)=>eval(a.getAttribute("value"))>eval(b.getAttribute("value"))?-1:eval(a.getAttribute("value"))<eval(b.getAttribute("value"))?1:0,coinSort=o=>{let t=Array.from(tokensBox$1.childNodes).sort(o=="increase"?coinSortIncrease:coinSortDecrease);tokensBox$1.innerHTML="";for(let e=0;e<t.length;e++)tokensBox$1.append(t[e])};sortBtn.addEventListener("click",()=>{sortBtn.className=="icon-[flat-color-icons--numerical-sorting-12] h-10 w-10 cursor-pointer"?(sortBtn.className="icon-[flat-color-icons--numerical-sorting-21] h-10 w-10 cursor-pointer",sortBtn.setAttribute("mode","decrease"),coinSort("decrease")):(sortBtn.className="icon-[flat-color-icons--numerical-sorting-12] h-10 w-10 cursor-pointer",sortBtn.setAttribute("mode","increase"),coinSort("increase"))});const apiKey="548543d60cae568eca567de3ef6e1c3a8481c14af37ce4aeb38a22a4f80868e2;",addBtn=document.querySelector("#search-btn"),tokensBox=document.querySelector("#tokens-box"),tokensInput=document.querySelector("#tokens-input"),completeMain=document.querySelector("#auto-complete"),completeBox=document.querySelector("#auto-complete-box"),completeItem=document.querySelectorAll("#complete-item");let coinCollection={};async function addCoin(o,t){for(let i=0;i<tokensBox.childNodes.length;i++)if(tokensBox.childNodes[i].getAttribute("name")==o.toUpperCase())return 1;const e=document.createElement("div"),s=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div"),c=document.createElement("button");e.className="bg-white flex flex-col text-center",s.className="mt-6 text-sm font-medium",n.className="mt-1 text-4xl font-bold",r.className="bg-slate-300 mt-5 transition hover:bg-slate-600 hover:text-white cursor-pointer",c.className="py-5",c.type="button",n.id="price",e.append(s,n,r),r.append(c),e.setAttribute("name",o.toUpperCase()),tokensBox.append(e),s.innerHTML=`${o.toUpperCase()} - ${t} `,n.innerHTML="-",c.innerHTML=`
    <span class="icon-[f7--trash] align-middle"></span>
    Удалить
    `,r.addEventListener("click",()=>{e.remove()}),(await fetch(`https://min-api.cryptocompare.com/data/price?fsym=${o}&tsyms=${t}&api_key=${apiKey}`)).json().then(i=>{if(i.USD==null)return e.className="bg-red-100 flex flex-col text-center",1;s.innerHTML=`${o.toUpperCase()} - ${t} `,n.innerHTML=`${i.USD}`,e.setAttribute("value",i.USD)})}async function coinList(){coinCollection=(await(await fetch("https://min-api.cryptocompare.com/data/all/coinlist?summary=true")).json()).Data}coinList();addBtn.addEventListener("click",()=>{tokensInput.value&&(addCoin(tokensInput.value,"USD"),tokensInput.value="")});tokensInput.addEventListener("keypress",function(o){o.code==="Enter"&&(o.preventDefault(),addBtn.click(),hideComplete()),o.code==="Escape"&&(completeBox.removeAttribute("active"),hideComplete()),o.code==="ArrowDown"&&completeItem[0].focus()});let showComplete=()=>{completeBox.style.display="block",tokensInput.className="outline-none px-2.5 py-2 border-2 border-solid border-gray-300 rounded-t-lg shadow-[0_0px_11px_-2px_rgba(34,60,80,0.2)] w-full",tokensInput.style.borderBottom="none",tokensInput.setAttribute("active","true")},hideComplete=()=>{completeBox.style.display="none",tokensInput.className="outline-none px-2.5 py-2 border-2 border-solid border-gray-300 rounded-lg shadow-[0_0px_11px_-2px_rgba(34,60,80,0.2)] w-full",tokensInput.style.borderBottom="2px solid rgb(209 213 219 / var(--tw-border-opacity))",tokensInput.removeAttribute("active")};tokensInput.addEventListener("focus",()=>{tokensInput.value&&showComplete(),completeMain.setAttribute("active","true")});tokensInput.addEventListener("blur",()=>{setTimeout(hideComplete,50)});addBtn.addEventListener("focus",()=>{addBtn.setAttribute("active","true")});addBtn.addEventListener("blur",()=>{addBtn.removeAttribute("active")});tokensInput.addEventListener("input",function(){try{let o=Object.keys(coinCollection).filter(t=>t.match(new RegExp(`${tokensInput.value.toUpperCase()}`)));if(tokensInput.value)for(let t=0;t<completeItem.length;t++)o[t]==null||completeItem[t]==null||(showComplete(),completeItem[t].innerHTML=o[t],completeItem[t].addEventListener("click",e=>{e.stopImmediatePropagation(),tokensInput.value=`${completeItem[t].textContent}`,addBtn.click(),setTimeout(hideComplete,100)}),completeItem[t].addEventListener("focus",()=>{completeBox.setAttribute("active","true"),setTimeout(showComplete,50)}),completeItem[t].addEventListener("blur",()=>{setTimeout(()=>{addBtn.hasAttribute("active")&&(hideComplete(),completeBox.removeAttribute("active"))},1)}),completeItem[t].onkeyup=e=>{if(e.code==="Enter"&&(e.preventDefault(),e.stopImmediatePropagation(),tokensInput.value=`${completeItem[t].textContent}`,addBtn.click(),hideComplete()),e.code==="Escape"&&(completeBox.removeAttribute("active"),hideComplete()),e.code==="ArrowUp"){if(!completeItem[t-1])return 1;completeItem[t-1].focus()}if(e.code==="ArrowDown"){if(!completeItem[t+1])return 1;completeItem[t+1].focus()}});else hideComplete()}catch{}});
