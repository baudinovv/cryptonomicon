(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function r(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(t){if(t.ep)return;t.ep=!0;const i=r(t);fetch(t.href,i)}})();const l=document.querySelector("#search-btn"),s=document.querySelector("#tokens-box"),n=document.querySelector("#tokens-input"),b="548543d60cae568eca567de3ef6e1c3a8481c14af37ce4aeb38a22a4f80868e2",h=document.querySelector("#auto-complete"),m=document.querySelector("#auto-complete-box"),c=document.querySelectorAll("#complete-item");let y={};async function g(o,e){let r=await fetch(`https://min-api.cryptocompare.com/data/price?fsym=${o}&tsyms=${e}&api_key=${b}`);const a=document.createElement("div"),t=document.createElement("div"),i=document.createElement("div"),d=document.createElement("div"),p=document.createElement("button");a.className="bg-white flex flex-col text-center",t.className="mt-6 text-sm font-medium",i.className="mt-1 text-4xl font-bold",d.className="bg-slate-300 mt-5 transition hover:bg-slate-600 hover:text-white cursor-pointer",p.className="py-5",p.type="button",i.id="price",a.append(t,i,d),d.append(p),a.setAttribute("name",o),s.append(a),t.innerHTML=`${o.toUpperCase()} - ${e} `,i.innerHTML="-",p.innerHTML=`
        <span class="icon-[f7--trash] align-middle"></span>
        Удалить
    `,d.addEventListener("click",()=>{a.remove()});for(let f of c)if(f.getAttribute("name")==o)return 1;r.json().then(f=>{if(f.USD==null)return a.className="bg-red-100 flex flex-col text-center",1;t.innerHTML=`${o.toUpperCase()} - ${e} `,i.innerHTML=`${f.USD}`})}async function x(){try{if(!s.childNodes.length)return 1;let o="";for(let r=0;r<s.childNodes.length;r++)s.childNodes[r+1]?o=o+`${s.childNodes[r].getAttribute("name")},`:o=o+`${s.childNodes[r].getAttribute("name")}`;(await fetch(`https://min-api.cryptocompare.com/data/pricemulti?fsyms=${o}&tsyms=USD&api_key=${b}`)).json().then(r=>{for(let a=0;a<s.childNodes.length;a++){let t=s.childNodes[a].getAttribute("name");document.querySelector(`[name=${s.childNodes[a].getAttribute("name")}] #price`).innerHTML=`${r[t].USD}`}})}catch{}}setInterval(x,1e3);async function L(){y=(await(await fetch("https://min-api.cryptocompare.com/data/all/coinlist?summary=true")).json()).Data}L();l.addEventListener("click",()=>{n.value&&(g(n.value,"USD"),n.value="")});n.addEventListener("keypress",function(o){o.code==="Enter"&&(o.preventDefault(),l.click(),u()),o.code==="Escape"&&(m.removeAttribute("active"),u()),o.code==="ArrowDown"&&c[0].focus()});let v=()=>{m.style.display="block",n.className="outline-none px-2.5 py-2 border-2 border-solid border-gray-300 rounded-t-lg shadow-[0_0px_11px_-2px_rgba(34,60,80,0.2)] w-full",n.style.borderBottom="none",n.setAttribute("active","true")},u=()=>{m.style.display="none",n.className="outline-none px-2.5 py-2 border-2 border-solid border-gray-300 rounded-lg shadow-[0_0px_11px_-2px_rgba(34,60,80,0.2)] w-full",n.style.borderBottom="2px solid rgb(209 213 219 / var(--tw-border-opacity))",n.removeAttribute("active")};n.addEventListener("focus",()=>{n.value&&v(),h.setAttribute("active","true")});n.addEventListener("blur",()=>{setTimeout(u,50)});l.addEventListener("focus",()=>{l.setAttribute("active","true")});l.addEventListener("blur",()=>{l.removeAttribute("active")});n.addEventListener("input",function(){try{let o=Object.keys(y).filter(e=>e.match(new RegExp(`${n.value.toUpperCase()}`)));if(n.value)for(let e=0;e<c.length;e++)o[e]==null||c[e]==null||(v(),c[e].innerHTML=o[e],c[e].addEventListener("click",r=>{r.stopImmediatePropagation(),n.value=`${c[e].textContent}`,l.click(),setTimeout(u,100)}),c[e].addEventListener("focus",()=>{m.setAttribute("active","true"),setTimeout(v,50)}),c[e].addEventListener("blur",()=>{setTimeout(()=>{l.hasAttribute("active")&&(u(),m.removeAttribute("active"))},1)}),c[e].onkeyup=r=>{if(r.code==="Enter"&&(r.preventDefault(),r.stopImmediatePropagation(),n.value=`${c[e].textContent}`,l.click(),u()),r.code==="Escape"&&(m.removeAttribute("active"),u()),r.code==="ArrowUp"){if(!c[e-1])return 1;c[e-1].focus()}if(r.code==="ArrowDown"){if(!c[e+1])return 1;c[e+1].focus()}});else u()}catch{}});
